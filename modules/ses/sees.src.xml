<?xml version="1.0" encoding="utf-8"?>
<!--
	name 		- название класса
	msgcount	- сколько сообщений обрабатывается за один раз
	sleep_msec	- пауза между итерациями в работе процесса

	type
	====
		in 	- входные регистры (только для чтения)
		out	- выходные регистры (запись)
		io  - запись и чтение
-->
<SEES>
  <settings>
  	<set name="class-name" val="SEES"/>
	<set name="base-class" val="ObjectsManager"/>
  	<set name="msg-count" val="30"/>
	<set name="sleep-msec" val="150"/>
  </settings>
  <params>
	  <!-- type = [int,str]
	     int:  max,min
		 str:
	  -->
	  <item name="AcceptControlTime" type="int" min="-1" max=""/>
	  <item name="AcceptWaitingTime" type="int" />
	  <item name="CommandPause" type="int" />
	  <item name="DGProtectionCheckTime" type="int" />
	  <item name="Load20Time" type="int" />
	  <item name="NoPowerTime" type="int" />
	  <item name="OffTime" type="int" />
	  <item name="OnTime" type="int" />
	  <item name="QGOffTime" type="int" />
	  <item name="QGOnTime" type="int" />
	  <item name="RunTime" type="int" />
	  <item name="askPause" type="int" />
	  <item name="askTimeout" type="int" />
	  <item name="filterPause" type="int" />
	  <item name="initPause" type="int" />
	  <item name="kmax" type="int" />
	  <item name="modeTime" type="int" />
	  <item name="num" type="int" />
	  <item name="power" type="int" />
	  <item name="protectionPause" type="int" />
	  <item name="updateStateTime" type="int" />
  </params>
  <smap> 
  	<!-- name - название переменной в конф. файле -->
	<group name="GROUP" />
	<item name="state_as" vartype="in" iotype="AI" comment="состояние СЭС" />
	<item name="DG_Start_s" vartype="in" iotype="DI" comment="ДГ: запуск" />
	<item name="DG_Stop_s" vartype="in" iotype="DI" comment="ДГ: остановка" />
	<item name="QG_On_s" vartype="in" iotype="DI" 	comment="ГА: включение"/>
	<item name="QG_Off_s" vartype="in" iotype="DI" 	comment="ГА: отключение" />

	<item name="lmpDG_ON_c" vartype="out" iotype="AO" comment="lamp DG on" />
	<item name="lmpDG_OFF_c" vartype="out" iotype="AO" comment="lamp DG off" />
	<item name="lmpQG_ON_c" vartype="out" iotype="AO" comment="lamp QG on" />
	<item name="lmpQG_OFF_c" vartype="out" iotype="AO" comment="lamp QG off" />

	<item name="DG_RemoteControl_s" vartype="in" iotype="DI" comment="from DG" />
	<item name="QG_RemoteControl_s" vartype="in" iotype="DI" comment="from GRSH" />
	<item name="CtlMode_Auto_s" vartype="in" iotype="DI" 	comment="Включено автоматическое управление" />
	
	<item name="postID" vartype="out" iotype="AI" 	comment="ID выбранного поста управления" />
	
	<item name="Leader_f" vartype="in" iotype="DI" 	 comment="Лидер группы" />
	<item name="Priority_s" vartype="in" iotype="AI" 	 comment="Назначенный данному ДГ приоритет" />
	<item name="Reserv_f" vartype="out" iotype="DI" 	 comment="Reserv mode" />

	<item name="CtlMode_f" vartype="in" iotype="AO" 	comment="Текущий режим (входной датичик)" />
	<item name="ControlMode_f" vartype="out" iotype="AO" 	comment="Текущий режим (выходной датичик)" />
	<item name="CtlMode_QG_bs" vartype="out" iotype="AO" 	comment="QG lamp" />

	<item name="cmd_OnReserv_f" vartype="in" iotype="DI"  comment="Команда на включение резерва от СЭЭС для ДГ" />
	<item name="cmd_OffReserv_f" vartype="in" iotype="DI" comment="Команда на отключение резерва от СЭЭС для ДГ" />
	
	<item name="Reset_s" vartype="in" iotype="DI" comment="Сброс защиты" />
	<item name="Protection_BS" vartype="out" iotype="DI" comment="лампа 'Сброс защиты'" />
	
	<item name="NoPower_S" vartype="in" iotype="DI" 	 comment="Секция ГРЩ обесточена" />
	<item name="Overload95_S" vartype="in" iotype="DI" 	 comment="Нагрузка ДГ &gt; 95%" />
	<item name="Overload20_S" vartype="in" iotype="DI" 	 comment="Нагрузка ДГ &lt; 20%" />
	<item name="Overload105_S" vartype="in" iotype="DI" 	 comment="Перегрузка ДГ 105%" />
	<item name="Warning_S" vartype="in" iotype="DI"/>
	<item name="InfoCode_as" vartype="in" iotype="AI" comment="Обратная связь, в ответ на исполнение команды"/>

<!-- self asked... 
	<item name="power_as" vartype="in" iotype="AI" comment="Power"/>
	<item name="voltage_as" vartype="in" iotype="AI" comment="Voltage"/>
	<item name="frequency_as" vartype="in" iotype="AI" comment="Frequency"/>
-->
	<item name="DG_Start_C" vartype="out" iotype="DO"/>
	<item name="DG_Stop_C" vartype="out" iotype="DO"/>
	<item name="QG_On_C" vartype="out" iotype="DO"/>
	<item name="QG_Off_C" vartype="out" iotype="DO"/>
	<item name="OnControl_C" vartype="out" iotype="DO" comment="Разрешение работы для TWIDO"/>
	<item name="Reset_C" vartype="out" iotype="DO" comment="repeat: reset"/>
	<item name="NotAlone_C" vartype="out" iotype="DO" comment="repeat: not alone working"/>
	<item name="NoPower_C" vartype="out" iotype="DO" comment="repeat: no power"/>
	<item name="Ping_C" vartype="out" iotype="DO" comment="Ping"/>
	
  </smap>
  
  <msgmap>
  	<!-- name - название переменной в конф. файле -->
	<item name="mid_starting" comment="код сообщения 'запуск'" />
	<item name="mid_stopping" comment="код сообщения 'остановка'" />
	<item name="mid_endStarting" comment="код сообщения завершение пуска(остановки)" />
	<item name="mid_endStopping" comment="код сообщения завершение пуска(остановки)" />
	<item name="mid_BlockedRun" comment="код сообщения 'Запуск запрщён'" />
<!--	
	<item name="mid_discharging" comment="код сообщения 'разгрузка'" />
-->	
	<item name="mid_SetReserv" comment="код сообщения 'ДГ включен в резерв'" />
	<item name="mid_NotReserv" comment="код сообщения 'ДГ выведен из резерва'" />
	<item name="mid_SetReserv_Failure" comment="код сообщения 'Включение управления резервом невозможно'" />
	<item name="mid_NotOn" comment="код сообщения 'Отказ включения'" />
	<item name="mid_NotOff" comment="код сообщения 'Отказ отключения'" />
	<item name="mid_QG_NotOn" comment="код сообщения 'Отказ включения QG'" />
	<item name="mid_QG_NotOff" comment="код сообщения 'Отказ отключения QG'" />
	<item name="mid_QG_NotOn_LocalControl" comment="код сообщения 'Отказ включения QG. Управление автоматами с ГРЩ.'" />
	<item name="mid_QG_NotOff_LocalControl" comment="код сообщения 'Отказ отключения QG. Управление автоматами с ГРЩ.'" />
	<item name="mid_ProtectionNotReset" comment="код сообщения 'Не сброшена защита'" />
	<item name="mid_Diesel_NotOn"  comment="код сообщения 'Отказ запуска дизеля'" />
	<item name="mid_Diesel_NotOff" comment="код сообщения 'Отказ остановки дизеля'" />
	<item name="mid_Generator_NotOn"  comment="код сообщения 'Отказ включения генератора'" />
	<item name="mid_Generator_NotOff" comment="код сообщения 'Отказ отключения генератора'" />
	<item name="mid_NA_State" comment="код сообщения 'Неопределённое состояние'" />
	<item name="mid_BadOperation" comment="код сообщения 'Неверные действия оператора'" />
	<item name="mid_NotFinished" comment="код сообщения 'назавершённый пуск или остановка'" />
	<item name="mid_NotDischarge" comment="код сообщения 'не удалось перевести нагрузку'" />
	<item name="mid_NotAccept" comment="код сообщения 'запрет одновременного включения'" />
	<item name="mid_ReservBadAction" comment="код сообщения 'Неверные действия по управлению резервом'" />
	<item name="mid_OnReservBadAction" comment="код сообщения 'Включение резерва во время уска/остановки'" />
	<item name="mid_ProtectionOn" comment="код сообщения 'Режим защиты'" />
	<item name="mid_ProtectionOff" comment="код сообщения 'Снятие режима защиты'" />
	<item name="mid_SetReserv_Att"/>
  </msgmap>
</SEES>
